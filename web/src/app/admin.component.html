<div class="card">
  <h2 class="post-title">Admin Dashboard</h2>

  <div *ngIf="!status?.connected">
    <p>You are not connected to Mastodon.</p>
    <a [href]="api.loginUrl()">
      <button>Connect Account</button>
    </a>
  </div>

  <div *ngIf="status?.connected">
    <div class="row">
      <div>
        <strong>Status:</strong> Connected<br>
        <small class="muted">Last Cache Sync: {{ status.last_sync | date:'medium' }}</small>
      </div>
      <button class="secondary" (click)="sync()" [disabled]="syncing">
        {{ syncing ? 'Syncing...' : 'Force Refresh Cache' }}
      </button>
    </div>

    <hr>

    <h3>Write New Post</h3>
    <textarea [(ngModel)]="draft" placeholder="What's on your mind?"></textarea>
    <div class="row" style="margin-top:10px;">
      <small>{{ draft.length }} chars</small>
      <button (click)="publish()" [disabled]="!draft.trim()">Publish</button>
    </div>
  </div>
</div>
